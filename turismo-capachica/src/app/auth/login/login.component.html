<section class="relative min-h-screen flex items-center justify-center px-4 py-10 bg-black/60">
  <!-- Fondo -->
  <img src="/assets/images/portal.jpg" alt="Fondo tur√≠stico"
    class="absolute inset-0 w-full h-full object-cover z-0 opacity-50" />
  <div
    class="relative z-10 w-full max-w-6xl bg-white rounded-[40px] shadow-xl overflow-hidden flex flex-col lg:flex-row border border-gray-200">

    <div
      class="flex flex-col lg:flex-row w-full max-w-6xl h-auto lg:h-[600px] bg-white rounded-[40px] overflow-hidden shadow-xl border border-gray-200">

      <!-- FORMULARIO -->
      <div class="w-full lg:w-[40%] flex flex-col justify-center px-10 py-12 space-y-4">
        <div class="flex justify-center mb-4">
          <img src="/assets/images/logo-capachica.png" alt="Capachica" class="h-16" />
        </div>

        <h2 class="text-2xl font-bold text-center mb-4">Inicie Sesi√≥n</h2>

        <!-- Botones sociales -->
        <div class="flex justify-center gap-4 mb-2">
          <button class="flex items-center justify-center px-6 py-2 border rounded-md w-36">
            <img src="https://icongr.am/fontawesome/google.svg?size=16&color=000" class="mr-2" />
            Google
          </button>
          <button class="flex items-center justify-center px-6 py-2 border rounded-md w-36">
            <img src="https://icongr.am/fontawesome/facebook.svg?size=16&color=000" class="mr-2" />
            Facebook
          </button>
        </div>

        <p class="text-center text-sm text-gray-500">or continue with</p>
        <!-- üîÑ Fullscreen Loader -->
        <div *ngIf="isLoading" class="fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm">
          <div class="text-center text-white">
            <svg class="animate-spin h-12 w-12 text-white mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none"
              viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" />
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z" />
            </svg>
            <p class="text-lg font-medium">Cargando tu panel...</p>
          </div>
        </div>

        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
          <!-- EMAIL -->
          <div>
            <label class="block text-sm font-medium text-gray-700">Email</label>
            <input type="email" formControlName="email" placeholder="usuario@correo.com"
              class="w-full border border-gray-300 px-4 py-2 rounded-md text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none"
              [class.border-red-500]="form.get('email')?.invalid && form.get('email')?.touched" />
            <div *ngIf="form.get('email')?.invalid && form.get('email')?.touched" class="text-xs text-red-500 mt-1">
              Ingrese un correo v√°lido.
            </div>
          </div>

          <!-- PASSWORD -->
          <div class="relative">
            <label class="block text-sm font-medium text-gray-700">Contrase√±a</label>
            <input [type]="showPassword ? 'text' : 'password'" formControlName="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
              class="w-full border border-gray-300 px-4 py-2 rounded-md text-sm pr-10 focus:ring-2 focus:ring-indigo-500 focus:outline-none"
              [class.border-red-500]="form.get('password')?.invalid && form.get('password')?.touched" />

            <iconify-icon [icon]="showPassword ? 'mdi:eye-off' : 'mdi:eye'" width="22"
              class="absolute top-7 right-3 text-gray-500 cursor-pointer hover:text-black transition"
              (click)="showPassword = !showPassword"></iconify-icon>
            <div *ngIf="form.get('password')?.invalid && form.get('password')?.touched"
              class="text-xs text-red-500 mt-1">
              La contrase√±a es obligatoria.
            </div>
          </div>

          <!-- ENLACE OLVID√â CONTRASE√ëA -->
          <div class="text-right text-xs text-indigo-600 hover:underline">
            <a routerLink="/recuperar-password">¬øOlvidaste tu contrase√±a?</a>
          </div>

          <!-- BOT√ìN DE INGRESO -->
          <button type="submit" [disabled]="form.invalid || isLoading"
            class="w-full bg-indigo-700 text-white py-2 rounded-full hover:bg-indigo-800 transition font-semibold flex items-center justify-center gap-2 disabled:opacity-50">
            <ng-container *ngIf="!isLoading; else cargando">
              Iniciar sesi√≥n
            </ng-container>

            <ng-template #cargando>
              <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" />
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z" />
              </svg>
              Cargando...
            </ng-template>
          </button>

        </form>

        <p class="text-center text-xs text-gray-500 mt-6">
          Don‚Äôt have an account yet?
          <a routerLink="/auth/register" class="font-semibold text-black hover:underline">Registrarte</a>
        </p>
      </div>

      <!-- IMAGEN -->
      <!-- IMAGEN CORRECTA DENTRO DE CARD -->
      <div class="hidden lg:flex lg:w-[60%] items-center justify-center p-6">
        <img src="/assets/images/portal.jpg" alt="Login Fondo" class="w-full h-full object-cover rounded-[40px]" />
      </div>
    </div>
  </div>
</section>