<div class="max-w-6xl mx-auto bg-white/80 backdrop-blur-lg p-8 md:p-12 rounded-3xl shadow-2xl border border-gray-200/50 space-y-8">
  <!-- Header con icono -->
  <div class="text-center space-y-4">
    <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl shadow-lg">
      <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
      </svg>
    </div>
    <h2 class="text-4xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent">
      Registro de Empresa
    </h2>
    <p class="text-gray-600 max-w-2xl mx-auto">
      Complete la información de su empresa para crear su perfil empresarial
    </p>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" enctype="multipart/form-data" class="space-y-8">
    
    <!-- Sección: Información Básica -->
    <div class="bg-gray-50/50 rounded-2xl p-6 space-y-6">
      <h3 class="text-xl font-semibold text-gray-800 flex items-center gap-2">
        <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        Información Básica
      </h3>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- RUC con validación visual -->
        <div class="space-y-2">
          <label class="text-sm font-semibold text-gray-700 flex items-center gap-1">
            RUC *
            <span class="text-red-500">*</span>
          </label>
          <div class="relative">
            <input
              formControlName="ruc"
              type="text"
              placeholder="20481234567"
              maxlength="11"
              class="w-full px-4 py-3 pr-10 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none shadow-sm transition-all duration-200 hover:border-gray-400"
              [class.border-red-500]="form.get('ruc')?.invalid && form.get('ruc')?.touched"
              [class.border-green-500]="form.get('ruc')?.valid && form.get('ruc')?.value"
            />
            <div class="absolute inset-y-0 right-0 flex items-center pr-3">
              <svg *ngIf="form.get('ruc')?.valid && form.get('ruc')?.value" class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <svg *ngIf="form.get('ruc')?.invalid && form.get('ruc')?.touched" class="w-5 h-5 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </div>
          </div>
          <p class="text-xs text-gray-500">Número de RUC de 11 dígitos</p>
        </div>

        <!-- Razón Social -->
        <div class="space-y-2">
          <label class="text-sm font-semibold text-gray-700">
            Razón Social *
          </label>
          <input
            formControlName="business_name"
            type="text"
            placeholder="Capachica Tours SAC"
            class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none shadow-sm transition-all duration-200 hover:border-gray-400"
            [class.border-red-500]="form.get('business_name')?.invalid && form.get('business_name')?.touched"
          />
        </div>

        <!-- Nombre Comercial -->
        <div class="space-y-2">
          <label class="text-sm font-semibold text-gray-700">
            Nombre Comercial
          </label>
          <input
            formControlName="trade_name"
            type="text"
            placeholder="Capachica Tours"
            class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none shadow-sm transition-all duration-200 hover:border-gray-400"
          />
        </div>
      </div>
    </div>

    <!-- Sección: Contacto y Servicios -->
    <div class="bg-gray-50/50 rounded-2xl p-6 space-y-6">
      <h3 class="text-xl font-semibold text-gray-800 flex items-center gap-2">
        <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
        </svg>
        Contacto y Servicios
      </h3>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
       <!-- Tipo de Servicio -->
<div class="space-y-2">
  <label class="text-sm font-semibold text-gray-700">
    Tipo de Servicio *
  </label>
  
  <div class="relative">
    <input
      formControlName="service_type"
      type="text"
      list="serviceTypes"
      placeholder="Escribe o selecciona un tipo de servicio"
      class="w-full px-4 py-3 border border-gray-300 rounded-xl 
             focus:ring-2 focus:ring-blue-500 focus:border-blue-500 
             focus:outline-none shadow-sm transition-all duration-200 
             hover:border-gray-400"
      [class.border-red-500]="form.get('service_type')?.invalid && form.get('service_type')?.touched"
    />

    <!-- Icono de flecha para indicar que hay sugerencias -->
    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
      <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M19 9l-7 7-7-7"></path>
      </svg>
    </div>

    <!-- Aquí van las opciones para el datalist -->
    <datalist id="serviceTypes">
      <option *ngFor="let tipo of serviceTypes" [value]="tipo"></option>
    </datalist>
  </div>

  <p *ngIf="form.get('service_type')?.invalid && form.get('service_type')?.touched"
     class="text-xs text-red-500">
    Debes indicar un tipo de servicio.
  </p>
</div>


        <!-- Email -->
        <div class="space-y-2">
          <label class="text-sm font-semibold text-gray-700">
            Correo de Contacto *
          </label>
          <div class="relative">
            <input
              formControlName="contact_email"
              type="email"
              placeholder="empresa@correo.com"
              class="w-full px-4 py-3 pl-10 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none shadow-sm transition-all duration-200 hover:border-gray-400"
              [class.border-red-500]="form.get('contact_email')?.invalid && form.get('contact_email')?.touched"
            />
            <div class="absolute inset-y-0 left-0 flex items-center pl-3">
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path>
              </svg>
            </div>
          </div>
        </div>

        <!-- Teléfono -->
        <div class="space-y-2">
          <label class="text-sm font-semibold text-gray-700">
            Teléfono *
          </label>
          <div class="relative">
            <input
              formControlName="phone"
              type="tel"
              placeholder="+51 987 654 321"
              class="w-full px-4 py-3 pl-10 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none shadow-sm transition-all duration-200 hover:border-gray-400"
            />
            <div class="absolute inset-y-0 left-0 flex items-center pl-3">
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
              </svg>
            </div>
          </div>
        </div>

        <!-- Sitio Web -->
        <div class="space-y-2">
          <label class="text-sm font-semibold text-gray-700">
            Sitio Web
          </label>
          <div class="relative">
            <input
              formControlName="website"
              type="url"
              placeholder="https://www.miempresa.com"
              class="w-full px-4 py-3 pl-10 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none shadow-sm transition-all duration-200 hover:border-gray-400"
            />
            <div class="absolute inset-y-0 left-0 flex items-center pl-3">
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"></path>
              </svg>
            </div>
          </div>
        </div>


        <!-- Ubicación (location_id) -->
<div class="space-y-2">
  <label class="text-sm font-semibold text-gray-700">
    Comunidad / Zona Turística *
  </label>
  <div class="relative">
    <select
      formControlName="location_id"
      class="w-full px-4 py-3 border border-gray-300 rounded-xl 
             focus:ring-2 focus:ring-blue-500 focus:border-blue-500 
             focus:outline-none shadow-sm transition-all duration-200 
             hover:border-gray-400 appearance-none bg-white"
    >
      <option [ngValue]="null" disabled selected>
        Selecciona una comunidad
      </option>
      <option *ngFor="let c of comunidades" [ngValue]="c.id">
        {{ c.name }}
      </option>
    </select>
    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
      <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M19 9l-7 7-7-7"></path>
      </svg>
    </div>
  </div>
  <p *ngIf="form.get('location_id')?.invalid && form.get('location_id')?.touched"
     class="text-xs text-red-500">
    Debes seleccionar una comunidad.
  </p>
</div>
      </div>
    </div>

    <!-- Sección: Descripción y Logo -->
    <div class="bg-gray-50/50 rounded-2xl p-6 space-y-6">
      <h3 class="text-xl font-semibold text-gray-800 flex items-center gap-2">
        <svg class="w-5 h-5 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
        </svg>
        Descripción y Logo
      </h3>
      
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Descripción -->
        <div class="lg:col-span-2 space-y-2">
          <label class="text-sm font-semibold text-gray-700">
            Descripción de la Empresa
          </label>
          <textarea
            formControlName="description"
            rows="6"
            placeholder="Describe brevemente tu empresa, servicios principales, experiencia y lo que la hace única..."
            class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none shadow-sm resize-none transition-all duration-200 hover:border-gray-400"
          ></textarea>
          <p class="text-xs text-gray-500">Máximo 500 caracteres</p>
        </div>

        <!-- Logo Upload -->
        <div class="space-y-4">
          <label class="text-sm font-semibold text-gray-700">
            Logo de la Empresa
          </label>
          
          <!-- Zona de carga de archivo -->
          <div class="border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-blue-400 transition-colors duration-200">
            <div *ngIf="!previewUrl" class="space-y-3">
              <svg class="mx-auto w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
              </svg>
              <div>
                <label class="cursor-pointer">
                  <span class="text-blue-600 font-medium hover:text-blue-500">Subir archivo</span>
                  <input type="file" accept="image/*" (change)="onLogoSelected($event)" class="hidden" />
                </label>
                <p class="text-xs text-gray-500 mt-1">PNG, JPG hasta 5MB</p>
              </div>
            </div>
            
            <!-- Preview del logo -->
            <div *ngIf="previewUrl" class="space-y-3">
              <img
                [src]="previewUrl"
                alt="Preview Logo"
                class="w-24 h-24 mx-auto rounded-2xl object-cover ring-4 ring-blue-100 shadow-lg"
              />
              <div class="space-y-2">
                <label class="cursor-pointer">
                  <span class="text-blue-600 font-medium hover:text-blue-500 text-sm">Cambiar logo</span>
                  <input type="file" accept="image/*" (change)="onLogoSelected($event)" class="hidden" />
                </label>
                <button 
                  type="button" 
                  (click)="removePreview()" 
                  class="block mx-auto text-xs text-red-500 hover:text-red-700"
                >
                  Quitar
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Botones de acción -->
    <div class="flex flex-col sm:flex-row justify-between items-center gap-4 pt-6 border-t border-gray-200">
      <div class="text-sm text-gray-500">
        * Campos obligatorios
      </div>
      
      <div class="flex flex-col sm:flex-row gap-3">
        <button
          type="button"
          class="px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"
          (click)="cancelAndLogout()"
        >
          <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
          Cancelar
        </button>

        <button
          type="submit"
          [disabled]="isLoading || form.invalid"
          class="px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-lg hover:shadow-xl"
        >
          <svg *ngIf="isLoading" class="animate-spin -ml-1 mr-3 h-4 w-4 text-white inline" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          <svg *ngIf="!isLoading" class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg>
          {{ isLoading ? 'Registrando...' : 'Registrar Empresa' }}
        </button>
      </div>
    </div>
  </form>
</div>